 devops-netology

# Домашнее задание к занятию "3.6. Компьютерные сети, лекция 1"

### 2. Узнайте о том, сколько действительно независимых (не пересекающихся) каналов есть в разделяемой среде WiFi при работе на 2.4 ГГц. Стандарты с полосой 5 ГГц более актуальны, но регламенты на 5 ГГц существенно различаются в разных странах, а так же не раз обновлялись. В качестве дополнительного вопроса вне зачета, попробуйте найти актуальный ответ и на этот вопрос.
   Диапазон частот 2,4 ГГц соответствует международному стандарту ISM. Разрешенный в России диапазон включает 13 каналов из 14 (14-й разрешено использовать только в Японии) шириной в 20 МГц.
   Не перекающимися каналами являются каналы 1-й, 6-й и 11-й. ФОрмально, в России можно считать не перекающимися и каналы 2-7-12 и 3-8-1, но в большинстве стран в этом диапазон доступны только 
   11 каналов, поэтому действительно независимыми можно считать набор 1-6-11. При использовании полосы в 40 Мгц на канал, о не пресекающихся каналах можно говорить чисто условно, например,
   широкие каналы 5+9 или 4+8 эффективно будут ставить помехи по всей ширине диапазона.
   5 ГГц - это не единый диапазон частот, а ряд диапазонов. Выделяемые для нелицензируемой работы полосы частот называются UNII (Нелицензируемая национальная информационная инфраструктура).
   Частотная сетка диапазона предусматривает использования для Wi-Fi только непересекающихся каналов шириной 20 МГц и с шагом 20 МГц, от начала и конца полосы частотный отступ составляет 30 МГц.
   Первоначально были разрешены к использованию полосы UNII-1 (Европа, Россия) и дополнительно к ней UNII-3 и один канал из "медицинского" ISM (США), позднее к ним добавили полосу UNII-2.
   Диапазон содержит 25 непересекающихся каналов. Частотные полосы UNII-2 и UNII-2 Extended выделенные для Wi-Fi пересекаются с частотами, на которых работают авиационные, судовые и военные радары,
   а также погодные радары аэродромов.
   В России на текущий момент времени из диапазона UNII-2 Extended разрешено использование только четырех каналов 132-144, таким образом у нас доступно всего 17 непересекающихся каналов,
   по четыре в каждой из полос UNII и один в ISM
   Кроме стандартной ширины канала в 20 МГц стандартами Wi-Fi предусмотрено использование каналов шириной в 40 МГц, 80 МГц и 160 МГц. Широкие полосы могут использоваться только в полосах UNII.
   Таким образом каждая из доступных в России полос может содержать по 4 канала 20 МГц, 2 канала 40 МГц и по одному каналу 80 МГц. Канал шириной в 160 МГц может использоваться только один,
   получаемый при объединении полос UNII-1 и UNII-2 - занимая всю их ширину.

### 3. Адрес канального уровня – MAC адрес – это 6 байт, первые 3 из которых называются OUI – Organizationally Unique Identifier или уникальный идентификатор организации. Какому производителю принадлежит MAC `38:f9:d3:55:55:79`?
   Скачиваем базу с  OUI
```wget http://standards-oui.ieee.org/oui/oui.txt
```
   Находим производителя, которому принадлежит MAC-адрес в задании
```vagrant@vagrant:~/devops-netology$ grep -i 38f9d3 oui.txt 
38F9D3     (base 16)            Apple, Inc.
vagrant@vagrant:~/devops-netology$ 
```
   Этот mac-адрес принадлежит компании Apple


### 4. Каким будет payload TCP сегмента, если Ethernet MTU задан в 9001 байт, размер заголовков IPv4 – 20 байт, а TCP – 32 байта?
   Максимальный размер payload TCP (MSS) = MTU − размер заголовка IP − размер заголовка TCP, соотвественно в данном случае MSS будет равен *8949*

### 5. Может ли во флагах TCP одновременно быть установлены флаги SYN и FIN при штатном режиме работы сети? Почему да или нет?
   Нет, флаги SYN и FIN не могут быть установленны одновременно, так как флаг SYN указывает на начало соединения, а флаг FYN указывает на завершение соединения.

### 6. `ss -ula sport = :53` на хосте имеет следующий вывод:

```bash
State           Recv-Q          Send-Q                   Local Address:Port                     Peer Address:Port          Process
UNCONN          0               0                        127.0.0.53%lo:domain                        0.0.0.0:*
```
Почему в `State` присутствует только `UNCONN`, и может ли там присутствовать, например, `TIME-WAIT`?

   Состояние UNCONN - это значит *отключен*, так как этот порт ничем не используется.  В данном выводе *TIME-WAIT* присутствовать не может, так как мы используем ключ *-u*, а жто значит,
   выводится информация для udp-сокетов, а  состояние *TIME-WAIT* может быть только у tcp-сокета. Оно означает, что Узел-1 получил сегмент с флагом FIN, отправил сегмент с флагом ACK и 
   ждёт 2*MSL секунд, перед окончательным закрытием соединения. 

### 7. Обладая знаниями о том, как штатным образом завершается соединение (FIN от инициатора, FIN-ACK от ответчика, ACK от инициатора), опишите в каких состояниях будет находиться TCP соединение в каждый момент времени на клиенте и на сервере при завершении. Схема переходов состояния соединения вам в этом поможет.
Клиент|Сервер
------|------
Начальное состояние|Действие|Переход в состояние|Начальное состояние|Действие|Переход в состояние
-------------------|--------|-------------------|-------------------|--------|-------------------
ESTABLISHED|FIN-WAIT-1|ESTABLISHED| |
FIN-WAIT-1| |ESTABLISHED|CLOSE-WAIT
FIN-WAIT-1|FIN-WAIT-2|CLOSE-WAIT| |
FIN-WAIT-2| |CLOSE-WAIT|LAST-ACK
FIN-WAIT-2| |LAST-ACK| |TIME-WAIT| |LAST-ACK|CLOSED
TIME-WAIT|CLOSED|CLOSED| |
CLOSED| |CLOSED| |

1. TCP порт – 16 битное число. Предположим, 2 находящихся в одной сети хоста устанавливают между собой соединения. Каким будет теоретическое максимальное число соединений, ограниченное только лишь параметрами L4, которое параллельно может установить клиент с одного IP адреса к серверу с одним IP адресом? Сколько соединений сможет обслужить сервер от одного клиента? А если клиентов больше одного?

1. Может ли сложиться ситуация, при которой большое число соединений TCP на хосте находятся в состоянии  `TIME-WAIT`? Если да, то является ли она хорошей или плохой? Подкрепите свой ответ пояснением той или иной оценки.

1. Чем особенно плоха фрагментация UDP относительно фрагментации TCP?

1. Если бы вы строили систему удаленного сбора логов, то есть систему, в которой несколько хостов отправяют на центральный узел генерируемые приложениями логи (предположим, что логи – текстовая информация), какой протокол транспортного уровня вы выбрали бы и почему? Проверьте ваше предположение самостоятельно, узнав о стандартном протоколе syslog.

1. Сколько портов TCP находится в состоянии прослушивания на вашей виртуальной машине с Ubuntu, и каким процессам они принадлежат?

1. Какой ключ нужно добавить в `tcpdump`, чтобы он начал выводить не только заголовки, но и содержимое фреймов в текстовом виде? А в текстовом и шестнадцатиричном?

1. Попробуйте собрать дамп трафика с помощью `tcpdump` на основном интерфейсе вашей виртуальной машины и посмотреть его через tshark или Wireshark (можно ограничить число пакетов `-c 100`). Встретились ли вам какие-то установленные флаги Internet Protocol (не флаги TCP, а флаги IP)? Узнайте, какие флаги бывают. Как на самом деле называется стандарт Ethernet, фреймы которого попали в ваш дамп? Можно ли где-то в дампе увидеть OUI?

 
 ---

### Как оформить ДЗ?

Домашнее задание выполните в файле readme.md в github репозитории. В личном кабинете отправьте на проверку ссылку на .md-файл в вашем репозитории.

Также вы можете выполнить задание в [Google Docs](https://docs.google.com/document/u/0/?tgif=d) и отправить в личном кабинете на проверку ссылку на ваш документ.
Название файла Google Docs должно содержать номер лекции и фамилию студента. Пример названия: "1.1. Введение в DevOps — Сусанна Алиева"
Перед тем как выслать ссылку, убедитесь, что ее содержимое не является приватным (открыто на комментирование всем, у кого есть ссылка). 
Если необходимо прикрепить дополнительные ссылки, просто добавьте их в свой Google Docs.

Любые вопросы по решению задач задавайте в чате Slack.

---

